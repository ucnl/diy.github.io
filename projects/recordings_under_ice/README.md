| ![logo](https://ucnl.github.io/documentation/sm_logo.png) |
| :---: |
| [www.diy.unavlab.com](https://diy.unavlab.com/README_RU.html) <br/> [support@unavlab.com](mailto:support@unavlab.com) |
| [**EN**](README.html) \| [**RU**](README_RU.html) |

# Appendix to [project 2](/projects/preamplifier_for_hydrophone/): recording of underwater sounds from under the ice

### Contents
- [Дисклеймер]()
- [Введение]()
- [Разбор фрагмента 1]()
- [Разбор фрагмента 2]()
- [Фрагмент 3]()

<div style="page-break-after: always;"></div>

## Disclaimer
**ATTENTION!!! Water bodies are an increased source of danger, and if you are on the water or on the surface of the ice, it requires the strictest observance of safety rules!
If you have no experience, you have not been instructed in safety precautions or you are a minor - in no case go out on the water or ice of the reservoir !!!
If you repeat the experiments described in this material - you act at your own peril and risk - we are not responsible for your safety!**

## Introduction
In this article we describe the experience of using a previously made [hydrophone with preamplifier](/projects/preamplifier_for_hydrophone/README_RU).
At the beginning of December, we were very lucky with the weather - sunny, calm, in two weeks of frost the ice on small reservoirs gained sufficient strength. We have just prepared prototypes of equipment for testing our new tracking system [WAYU] (https://docs.unavlab.com/navigation_and_tracking_systems_ru.html#wayu) and went at one of the crossings in the [Volgo-Don Shipping Canal] (https: //goo.gl/maps/rmktnCWcauE4HbcZ6). We decided not to miss the chance to test our hydrophone in a real reservoir - this is, firstly, an excellent demonstration of its capabilities, and secondly, using real recordings as an example, we can teach the simplest techniques for working with sound recordings.

Winter bodies of stagnant water enclosed in ice cover are ideal conditions for recording underwater sounds because there is no noise from wind waves and shipping.

So. Our headquarters on the ice looked like this:

| ![hydrophone](7.jpeg) |
| :---: |
| рисунок 1 - "Офис на вынос" |

Ноутбук в общем не предназначен для работы при пониженных температурах и большую часть времени наш работает от преобразователя, подключенного к большому 12-вольтовому аккумулятору. К сожалению, преобразователь дает очень сильную импульсную помеху, которая попадает на запись. Поэтому на время записи мы отключаем ноутбук от внешнего питания. 

Наш гидрофон сделан из доступных материалов (чтобы у желающих повторить эту конструкцию не возникло проблем с комплектующими) и изоляция кабеля RG-174 выполнена из ПВХ, который дубеет на морозе и его сложно вытянуть после того, как он был смотан. 
В коммерческих устройствах мы используем кабели только с полиуретановой изоляцией, которая лишена такого недостатка.

| ![hydrophone](3.jpeg) |
| :---: |
| рисунок 2 - Опускаем гидрофон в лунку |

С некоторыми усилиями гидрофон опускается в лунку. В некоторых случаях, особенно если кабель длинный и хочется опустить устройство на большую глубину, придется привязатьк нему какой-то груз - чтобы кабель выпрямлялся под его весом.

| ![hydrophone](5.jpeg) |
| :---: |
| рисунок 3 - Все готово для работы |

Этой зимой сложилась редкая ситуация - морозы простояли достаточно долго чтобы лед успел набрать прочность, а осадков практически не было. В таких случаях мы передвигаемя по поверхности водоема на коньках =)

| ![hydrophone](6.jpeg) |
| :---: |
| рисунок 4 - Гидрофон отлично чувствует скрип коньков по льду |

Лед на водоемах часто трескается (с непривычки можно испугаться). Возникают вот такие трещины:

| ![hydrophone](8.jpeg) |
| :---: |
| рисунок 5 - Трещина во льду |

Иногда, если трещина возникает где-то рядом, слышится громкий хруст. Но чаще можно услышать (и иногда даже почувствовать ногами) звук расходящейся где-то далеко трещины. Он достаточно характерен и его сложно с чем-то спутать.


## Разбор фрагмента 1

Мы подумали, что неплохо было бы на примере такого звука разобрать самые базовые приемы работы с гидрофоном и звуковым редкатором. Хоть наш гидрофон и предназначен для записи звуков примерно от 10 кГц, а звук расходящейся трещины явно низкочастотный, мы все же сделали пару записей длительностью по 3-4 минуты, на которых явно должны были попасть несколько таких звуков. 

Найти их в длинной записе не так просто - нужно внимательно просмотреть и прослушать всю запись. Поэтому мы уже выбрали соотвтетсвующий короткий кусок:

| ![hydrophone](1_0_source.png) |
| :---: |
| рисунок 6 - Фрагмент записи №1 |

Для записи и манипуляций со звуком мы использовали очень удобное бесплатное приложение [Ocenaudio](https://www.ocenaudio.com/). 
Вы можете скачать его и сами загрузить фрагмент записи, сделенной нами:

### [Исходный фрагмент записи №1](1_0_source_signal.wav)

Чтобы он выглядел также, как и на скриншоте выше, выберите пункт меню **View** > **Waveform & Spectral View** или просто нажмите **Ctrl + 3**.
Во временной реализации сигнала (верхняя половина окна) глаз ни за что не цепляется, а на спектрограмме (нижняя половина окна) примерно через 150 мсек от начала  виден мощный "всплеск" (учитывая то, что он находится вне рабочей полосы гидрофона) в полосе от нескольких сотен по пары килогерц.

> НЧ-фильтр - это фильтр низких частот, он фильтрует _низкие частоты_ от _высоких_. Часто этот термин вызывает путаницу. В этом случае удобно вспомнить английское название _Lowpass filter_, что означает _низкие проходят_.

Чтобы выделить этот участок, можно применить ко всему фрагменту НЧ-фильтр, тем самым отфильтровав все частоты выше примерно 2 кГц. 
Для этого выберите пункт меню **Effects** > **Filter** > **Lowpass Filter...**. В появившемся диалоговом окне установите верхнюю частоту фильтра (passband limit) на значении примерно 2 кГц:

| ![hydrophone](scr_filt_dialog.png) |
| :---: |
| рисунок 7 - Диалоговое окно Lowpass Filter |

Фильтр задавит все частоты выше примерно 2 кГц.
### [Фрагмент записи №1: НЧ фильтрация](1_1_lowpass.wav)

Теперь сигнал выглядит несколько иначе:

| ![hydrophone](1_1_lowpass.png) |
| :---: |
| рисунок 8 - Результат действия НЧ-фильтра |

Лишний фон практически полностью подавлен, но громкость сигнала явно недостаточна. Чтобы исправить это мы _нормализуем_ сигнал. Для чего выберем пункт меню **Effects** > **Normalize**. В результате получится такой сигнал:

### [Фрагмент записи №1: НЧ фильтрация + нормализация](1_2_normalized.wav)

| ![hydrophone](1_2_normalized.png) |
| :---: |
| рисунок 9 - НЧ-фильтр + нормализация |

Вместе с нормализацией немного вырос и уровен шумов, поэтому можно еще выполнить шумоподавление. В ocenaudio есть для этог удобная автоматическая функция: выбираем пункт меню **Effects** > **Noise Reduction** > **Automatic Noise Reduction**.

Теперь можно насладиться результатами работы и прослушать конечный результат. Звук расходящейся трещины теперь слышен отчетливо, и даже можно расслышать небольшое эхо, следующее за основным всплеском.

### [Фрагмент записи №1: НЧ фильтрация + нормализация + автошумоподавление](1_3_noise_reduction.wav)

| ![hydrophone](1_3_noise_reduction.png) |
| :---: |
| рисунок 10 - НЧ-фильтр + нормализация + автошумоподавление |


## Разбор фрагмента 2

В качестве второго фрагмента предлагаем разобрать звук скрипа коньков по льду. Все этапы здесь в точности такие же:

### [Фрагмент записи №2: Исходный сигнал](2_0_source_signal.wav)

| ![hydrophone](2_0_source.png) |
| :---: |
| рисунок 11 - Фрагмент №2: исходный сигнал |


Так как скрип коньков - это все-таки широкополосный сигнал, то верхнюю частоту фильтра установив на значение порядка 15 кГц (близко к пределу нашего слуха):

### [Фрагмент записи №2: НЧ-фильтрация](2_1_lowpass.wav)

| ![hydrophone](2_1_lowpass.png) |
| :---: |
| рисунок 12 - Фрагмент №2: НЧ-фильтрация |


### [Фрагмент записи №2: НЧ-фильтрация + нормализация](2_2_normalized.wav)

| ![hydrophone](2_2_normalized.png) |
| :---: |
| рисунок 12 - Фрагмент №2: НЧ-фильтр + нормализация |

И окончательный результат, после автоматического шумоподавления:

### [Фрагмент записи №2: НЧ-фильтрация + нормализация + автошумоподавление](2_3_noise_reduction.wav)

| ![hydrophone](2_3_noise_reduction.png) |
| :---: |
| рисунок 12 - Фрагмент №2: НЧ-фильтр + нормализация + автошумоподавление |

Если приглядеться (прислушаться?) то примерно в середине записи слышен челчок, но какова его природа мы предлагаем разобраться самостоятельно.

## Фрагмент 3

В качестве бонуса предлагаем вам самим проделать такие же манипуляции с третьим фрагментом: субъективно, они примерно в 4 раза интересней первого фрагмента:

### [Фрагмент записи №2: Исходный сигнал](3_0_source_signal.wav)



Надеемся, что вам понравилось. Спасибо за внимание и удачи!

_______  
[К содержанию](#%D1%81%D0%BE%D0%B4%D0%B5%D1%80%D0%B6%D0%B0%D0%BD%D0%B8%D0%B5)

<div style="page-break-after: always;"></div>
